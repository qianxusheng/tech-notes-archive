# C++

## 概述
- 支持 OOP 编程，同时具有 C 的特性，意味着可以直接调用系统函数，操作硬件等；

## 诞生
- 随着软件系统越来越复杂，编程人员需要一种更加强大的方式来组织管理代码。  
- OOP 提供了更好的组织形式，能够将复杂问题拆解成更小、更易于管理的模块（对象和类），并通过继承和多态使程序有更好的扩展性和灵活性。

## 多种编程风格
- **面向过程**：继承 C 语言特性（因为代码执行逻辑清晰，没有额外的封装，开销小）  
- **面向对象**：代码模块化，可扩展  
- **泛型编程**：C++11 引入了模版，函数可以处理多种类型的数据  
- **函数式编程**：C++11 引入了 lambda 表达式  

## 面向对象
- **类**：对象的模版  
- **对象**：类的实例化  
- **继承**：允许一个类继承另一个类的属性和方法，代码复用  
- **多态**：允许基类指针调用派生类的方法，运行时动态绑定函数，提供灵活的接口（虚函数）；  
  - 声明虚函数可以让子类重写（运行时多态）该方法，调用时通过虚函数表查找调用函数；  
  - 重载（静态多态），编译阶段根据参数列表决定调用哪一个函数或运算符  
- **封装**：数据和函数封装在类内，限制对数据的直接访问，保证数据的安全性  

## 编译
- **编译器 g++**：
  - 预处理（宏展开，头文件展开，条件编译处理，纯粹的 cpp 文件）；
  - 编译（汇编代码 `.s` 文件）；
  - 汇编（机器码 `.o` 文件）；
  - 链接（可执行文件）
- 编译器会根据当前硬件架构和操作系统生成相应的二进制文件（也可以交叉编译）；  
- 但是不管怎么样 C++ 生成的程序依赖目标平台的架构，不能在不同操作平台上执行；

## STL（containers，algorithm，iterator）
- **Vector**：动态数组  
- **Deque**：分段连续内存  
- **List**：双向列表  
- **Set/multiset**：红黑树，有序集合  
- **Map/multimap**：红黑树，有序字典  
- **Unordered_set/unordered_map**：哈希表  
- **Array**：静态数组  
- **Stack（container adaptor）**：deque  
- **Queue（container adaptor）**：deque  
- **Pq（container adaptor）**：vector+make_heap，调度算法  
- **Algorithm**：排序，查找（应用于数据结构的算法）
- **Iterator**：遍历容器（应用于数据结构的迭代器）

## 内存管理（C++主要通过系统调用来管理内存）
- 基本上只有静态数组的内存是分配在栈上的；  
- 动态数据结构都需要调整大小和结构，内存管理较为复杂，需要注意防止内存泄漏或悬空指针等；
- **栈内存**：操作系统为每个线程提供栈空间，当一个函数被调用时，函数的局部变量会压入栈  
- **堆内存**：调用操作系统的内存分配器：`malloc`，`free` 等  

## 并发编程（调度和处理并发）
- 操作系统管理进程，分配进程给应用程序，应用程序内部分配线程  
- C++ 通过 `std::thread` 使用互斥锁，条件变量，和线程间通信等机制，实现多线程任务的同步；
- **线程池**：预先创建的线程集合，避免频繁的线程销毁和创建，用于短时间的高并发场景；由任务队列+工作线程+调度器组成；
- **并发场景**：
  - 并行计算
  - 并发 I/O 操作
  - 用户界面响应
  - 网络应用
