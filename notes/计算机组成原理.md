# 计算机组成原理笔记（单片机组成原理，非重点）

## 硬件与软件

### 硬件：
- CPU（控制器 Control Unit，运算器 Arithmetic Logic Unit）
- 存储器（Memory，RAM 主存，HDD or SSD 辅存）
- I/O 设备

### 软件：
- 系统软件（DBMS，操作系统，网络软件等）
- 应用软件

## 硬件的主要技术指标
- 存储容量（CPU 的 cache，不是 RAM）
- 运算速度（单位时间执行的机器指令数量，主频，GHz）
- 机器字长（CPU 一次能处理的数据位数，64-bit 架构）

## 运算方法及运算部件（ALU）

### 数据的表示方法：
- 格雷码
- 8421 码
- 余三码等

### 带符号的二进制数据表示方法及二进制加减法：
- 原码
- 补码（减法变加法）
- 反码（方便做减法）
- 移码（浮点数指数部分）

### 二进制运算：
- 二进制乘法：
- 二进制除法：

### 浮点数运算：

### 运算部件：
- 定点运算部件（fixed-point unit）
- 浮点运算部件（floating-point unit）
- ABC 寄存器（AB 操作数，C 存储运算结果）

### 数据校验码：
- 奇偶校验码
- CRC 循环冗余校验码

## 指令系统

### 格式：
- 操作码 Opcode + 地址码 address；
- 操作码，操作数的地址，操作结果的存储地址，下一条指令的地址；

### 寻址方式（寻找操作数的地址）：
- 立即寻址
- 直接寻址
- 间接寻址
- 寄存器寻址

### 指令字长：
- 每条指令在内存中所占的字节数，受操作码和地址码长度的影响

### 地址码：
- 0123 多地址指令；寻址范围逐渐减小

## 中央处理器

### 工作过程：
- 加电 → 产生 reset 信号 → 执行程序 → 停机 → 停电

### 控制器的功能：
- 取指令
- 分析指令
- 执行指令
- 处理异常（中断）

### 控制器组成：
- 指令寄存器（IR，instruction register），存储当前指令
- 程序计数器（program counter，RC），存储下一跳指令
- 控制信号发生器（Control Signal Generator），根据操作码生成相应控制信号

### 控制器工作流程：
- 取指；
- 解码（操作码和操作数的地址码）；
- 执行；
- 更新 PC，跳转下一跳指令

### 各种周期：
- 指令周期：完成一条指令的时间
- 机器周期：CPU 完成指令中一个基本操作的时间
- 时钟周期：基准脉冲信号

### 层次关系：
- 时钟周期 → 机器周期 → 指令周期：
  - 多个时钟周期 → 完成一个机器周期；
  - 多个机器周期 → 完成一个指令周期

## 存储系统

### 层次结构：
- Cache → 主存 → 辅存

### 高速缓冲处理器：

### 虚拟存储器：
- 需要进行虚实的地址交换

### 主存储器：
- RAM

### 辅存储器：
- 光存储器（光盘）
- 磁式存储器：
  - 数字式：硬盘，磁带；
  - 模拟式：录音，录像

## I/O 设备

### 外设接口：
- 设备与主机相连时，必须按照物理互连特性，电气特性进行连接，称为接口标准

### 设备控制器：
- 实现主机与外部设备之间的数据输送；
- 数据缓冲；
- 接受主机命令控制设备

### I/O 编址方式：
- I/O 也需要地址，用于指令操作

### I/O 与主机的连接方式：
- 总线连接

### DMA（Direct Memory Access）：
- 允许外设直接与主存交换数据，无需 CPU 干预；

### 中断请求：
- 外部设备的触发机制，等待外设主动通知 CPU，实现 CPU 等待 I/O 操作时可以执行其他计算任务，避免 CPU 空闲，提高系统资源的利用率；
- 例如鼠标中断等等；
- CPU 灵活响应外部突发事件（通常比较紧急，需要及时响应，不然就错过了）的一种机制；
- 不用傻等，如果不采用中断 interrupt 机制，轮询 Polling 是十分低效的；

## CPU 指令执行过程

- 控制器从内部 PC 取得当前指令地址，发出控制信号到内存总线，将指令从内存加载到 IR；
- 控制器解码存储在 IR 的指令，控制运算器，内部寄存器，内存（存储器）等资源的调用；
- 比如使用运算器得到计算结果，控制器根据指令决定结果的去向（内存某个地址或内部寄存器）

---

> 整体工作流程就是：控制器控制过程，运算器进行运算，存储器存放待操作数，指令，中间结果之类的东西；纯粹的流水线；核心是CPU的控制器和运算器

